(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[396],{8325:function(e,n,t){"use strict";var r=t(6261),i=t(5893);n.Z=function(e){var n=r.W_;return(0,i.jsx)(n,{className:"page",id:e.id,children:(0,i.jsxs)("div",{className:"main",children:[e.title&&(0,i.jsx)("h1",{className:"title",children:e.title}),e.children]})})}},1077:function(e,n,t){"use strict";t.d(n,{Qt:function(){return p},kS:function(){return h},x4:function(){return x},_L:function(){return j},CE:function(){return v},x8:function(){return Z}});var r=t(266),i=t(809),c=t.n(i),s=t(5503),a=t(6257),o=t(4586),u=t(1369),l="agendas",d=((0,s.ZF)({apiKey:"AIzaSyAbevVynk_hK4q3EG800AsNzE19hnUqAVU",projectId:"elbuhotuerto"}),(0,a.ad)()),f=(0,u.v0)(),p=function(e,n){return(0,u.Aj)(f,(function(t){e(t),n(!1)}))},h=function(){var e=(0,r.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.signOut();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=(0,r.Z)(c().mark((function e(n,t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.e5)(f,n,t);case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),j=function(){var e=(0,r.Z)(c().mark((function e(n,t,r,i,s,u){var f,p;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f={id:(0,o.Z)(),time:t,person_count:r||0,contact:i||"",name:s||"",description:u||""},p=(0,a.JU)(d,l,n),e.next=4,(0,a.QT)(p);case 4:if(!e.sent.exists()){e.next=10;break}return e.next=8,(0,a.r7)(p,{reservations:(0,a.vr)(f)});case 8:e.next=12;break;case 10:return e.next=12,(0,a.pl)((0,a.JU)(d,l,n),{date:n,reservations:[f]});case 12:case"end":return e.stop()}}),e)})));return function(n,t,r,i,c,s){return e.apply(this,arguments)}}(),v=function(){var e=(0,r.Z)(c().mark((function e(n,t){var r,i,s,o,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,a.JU)(d,l,n),e.next=3,(0,a.QT)(r);case 3:if(!(i=e.sent).exists()){e.next=11;break}if(o=i.data(),u=null===o||void 0===o||null===(s=o.reservations)||void 0===s?void 0:s.find((function(e){return e.id===t}))){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,(0,a.r7)(r,{reservations:(0,a.Ab)(u)});case 11:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),Z=function(e,n){return(0,a.cf)((0,a.JU)(d,l,n),(function(n){var t,r=n.data();r&&r.reservations&&(r.reservations=null===r||void 0===r||null===(t=r.reservations)||void 0===t?void 0:t.sort((function(e,n){return e.time.localeCompare(n.time)})));e(r)}))}},6666:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return G}});var r=t(2809),i=t(7294),c=t(8325),s=t(1077),a=t(266),o=t(6311),u=t(809),l=t.n(u),d=t(6914),f=t(9783),p=t(4666),h=t(5522),x=t(7750),j=t(5344),v=t(1931),Z=t(578),g=t(8511),m=t(1655),y=t(8779),b=t(7645),O=t(8309),w=t(5893);function C(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function P(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?C(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var k=function(){var e=i.useState(!1),n=(0,o.Z)(e,2),t=n[0],c=n[1],u=(0,i.useState)({date:null,time:null}),C=u[0],k=u[1],S=function(e,n){k((function(t){return P(P({},t),{},(0,r.Z)({},n,e))}))},_=function(){k({date:null,time:null}),c(!1)},E=function(){var e=(0,a.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C.date&&C.time){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,s._L)((0,y.Z)(C.date,"yyyy-MM-dd"),(0,y.Z)(C.time,"HH:mm"),C.person_count,C.contact,C.name,C.description);case 4:_();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,w.jsxs)("div",{children:[(0,w.jsx)(d.Z,{variant:"outlined",onClick:function(){c(!0)},startIcon:(0,w.jsx)(O.Z,{}),children:"nueva reserva"}),(0,w.jsxs)(p.Z,{open:t,onClose:_,children:[(0,w.jsx)(b.Z,{children:"Nueva reserva"}),(0,w.jsxs)(x.Z,{children:[(0,w.jsxs)(j.Z,{dateAdapter:g.Z,locale:m.Z,children:[(0,w.jsx)(v.Z,{label:"D\xeda",inputFormat:"dd.MM.yyyy",value:C.date,onChange:function(e){return S(e,"date")},renderInput:function(e){return(0,w.jsx)(f.Z,P(P({},e),{},{margin:"dense",fullWidth:!0}))}}),(0,w.jsx)(Z.Z,{label:"Hora",ampm:!1,value:C.time,onChange:function(e){S(e,"time")},renderInput:function(e){return(0,w.jsx)(f.Z,P(P({},e),{},{margin:"dense",fullWidth:!0}))}})]}),(0,w.jsx)(f.Z,{margin:"dense",label:"Nombre",type:"text",fullWidth:!0,onChange:function(e){return S(e.target.value,"name")}}),(0,w.jsx)(f.Z,{margin:"dense",label:"Personas",type:"text",fullWidth:!0,onChange:function(e){return S(e.target.value,"person_count")}}),(0,w.jsx)(f.Z,{margin:"dense",label:"Contacto",type:"text",fullWidth:!0,onChange:function(e){return S(e.target.value,"contact")}}),(0,w.jsx)(f.Z,{margin:"dense",id:"name",label:"Observaciones",type:"text",fullWidth:!0,onChange:function(e){return S(e.target.value,"description")}})]}),(0,w.jsxs)(h.Z,{children:[(0,w.jsx)(d.Z,{onClick:_,children:"Cancelar"}),(0,w.jsx)(d.Z,{onClick:E,children:"A\xf1adir"})]})]})]})},S=t(7896),_=t(6501),E=t(9573),D=t(6011),N=t(3694),A=t(6926),M=t(8732),I=t(6867),W=t(6447),U=t(1508),H=t(3951),J=t(625),Q=t(6186);function T(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function q(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?T(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var z=function(e){var n=(0,i.useState)({}),t=n[0],c=n[1],o=(0,i.useState)(null),u=o[0],p=o[1],h=(0,i.useState)(!0),x=h[0],j=h[1],v=(0,i.useState)(!1),Z=v[0],g=v[1];(0,i.useEffect)((function(){var e=(0,s.Qt)(p,j);return function(){e()}}),[]);var m=function(e,n){c((function(t){return q(q({},t),{},(0,r.Z)({},n,e))}))},y=function(){var e=(0,a.Z)(l().mark((function e(n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,(0,s.x4)(t.username,t.password);case 4:g(!1),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),g(!0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(n){return e.apply(this,arguments)}}();return x?(0,w.jsx)("div",{children:"Loading"}):u?e.children:(0,w.jsx)(U.Z,{component:"form",noValidate:!0,autoComplete:"off",onSubmit:y,children:(0,w.jsxs)(W.Z,{spacing:3,children:[(0,w.jsx)(f.Z,{label:"Correo",onChange:function(e){return m(e.target.value,"username")}}),(0,w.jsx)(f.Z,{label:"Contrase\xf1a",type:"password",onChange:function(e){return m(e.target.value,"password")}}),Z&&(0,w.jsx)(Q.Z,{severity:"warning",children:"Por favor, compruebe sus datos de acceso"}),(0,w.jsx)(d.Z,{type:"submit",children:"Inicio"})]})})},F=t(9647),L=t(7349),V=t(6408),K=t(8364),R=function(e){var n=e.reservation,t=i.useState(!1),r=(0,o.Z)(t,2),c=r[0],u=r[1],f=function(){u(!1)},j=function(){var e=(0,a.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(),e.next=3,(0,s.CE)((0,y.Z)(n.date,"yyyy-MM-dd"),n.id);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,w.jsxs)("div",{children:[(0,w.jsx)(I.Z,{onClick:function(){u(!0)},"aria-label":"upload picture",component:"span",children:(0,w.jsx)(K.Z,{})}),(0,w.jsxs)(p.Z,{open:c,onClose:f,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,w.jsx)(b.Z,{id:"alert-dialog-title",children:"\xbfRealmente quieres borrar la reserva?"}),(0,w.jsx)(x.Z,{children:(0,w.jsxs)(V.Z,{id:"alert-dialog-description",children:[(0,y.Z)(n.date,"dd.MM.yyyy"),(0,w.jsx)("br",{}),n.time,(0,w.jsx)("br",{}),n.name]})}),(0,w.jsxs)(h.Z,{children:[(0,w.jsx)(d.Z,{onClick:f,children:"No"}),(0,w.jsx)(d.Z,{onClick:j,autoFocus:!0,children:"S\xed"})]})]})]})};function X(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function B(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?X(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):X(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var G=function(){var e=(0,i.useState)({}),n=e[0],t=e[1],r=(0,i.useState)(new Date),a=r[0],o=r[1];(0,i.useEffect)((function(){var e=(0,y.Z)(a,"yyyy-MM-dd"),n=(0,s.x8)(t,e);return function(){n()}}),[a]);var u=function(e){var n=(0,L.Z)(a,e);o(n)};return(0,w.jsx)(c.Z,{id:"agenda",title:"Agenda",children:(0,w.jsxs)(z,{children:[(0,w.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[(0,w.jsx)("div",{children:(0,w.jsx)(I.Z,{component:"span",onClick:function(){return u(-1)},children:(0,w.jsx)(H.Z,{})})}),(0,w.jsxs)(W.Z,{direction:"row",spacing:2,justifyContent:"center",alignItems:"center",children:[(0,w.jsx)(j.Z,{dateAdapter:g.Z,locale:m.Z,children:(0,w.jsx)(F.Z,{value:a,onChange:function(e){o(e)},renderInput:function(e){var n=e.inputRef,t=(e.inputProps,e.InputProps);return(0,w.jsxs)(U.Z,{sx:{display:"flex",alignItems:"center"},children:[null===t||void 0===t?void 0:t.endAdornment,"\xa0\xa0\xa0",(0,w.jsx)("strong",{ref:n,children:(0,y.Z)(a,"dd.MM.yyyy")})]})}})}),(0,w.jsx)(k,{})]}),(0,w.jsx)("div",{children:(0,w.jsx)(I.Z,{component:"span",onClick:function(){return u(1)},children:(0,w.jsx)(J.Z,{})})})]}),function(e){var n,t,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=e||[];return(0,w.jsx)(S.Z,{component:_.Z,children:(0,w.jsxs)(E.Z,{size:"small",sx:{minWidth:650},"aria-label":"simple table",children:[r&&(0,w.jsx)(D.Z,{children:(0,w.jsxs)(N.Z,{children:[(0,w.jsx)(A.Z,{children:"Hora"}),(0,w.jsx)(A.Z,{align:"right",children:"Nombre"}),(0,w.jsx)(A.Z,{align:"right",children:"Personas"}),(0,w.jsx)(A.Z,{align:"right",children:"Contacto"}),(0,w.jsx)(A.Z,{align:"right",children:"Observaciones"}),(0,w.jsx)(A.Z,{align:"center"})]})}),(0,w.jsxs)(M.Z,{children:[null===e||void 0===e||null===(n=e.filter((function(e){return e.time<"19:00"})))||void 0===n?void 0:n.map((function(e){return(0,w.jsxs)(N.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,w.jsx)(A.Z,{width:10,component:"th",scope:"row",children:e.time}),(0,w.jsx)(A.Z,{align:"right",children:e.name}),(0,w.jsx)(A.Z,{align:"right",children:e.person_count}),(0,w.jsx)(A.Z,{align:"right",children:e.contact}),(0,w.jsx)(A.Z,{align:"right",children:e.description}),(0,w.jsx)(A.Z,{width:10,align:"center",children:(0,w.jsx)(R,{reservation:B(B({},e),{},{date:a})})})]},e.name)})),0===i.filter((function(e){return e.time<"19:00"})).length&&(0,w.jsx)(N.Z,{children:(0,w.jsx)(A.Z,{colSpan:6,style:{textAlign:"center"},children:"No hay reservas"})}),(0,w.jsx)(N.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:(0,w.jsxs)(A.Z,{colSpan:6,width:10,component:"th",scope:"row",style:{textAlign:"center"},children:[(0,w.jsx)("hr",{}),(0,w.jsx)("hr",{})]})}),null===e||void 0===e||null===(t=e.filter((function(e){return e.time>"19:00"})))||void 0===t?void 0:t.map((function(e){return(0,w.jsxs)(N.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,w.jsx)(A.Z,{width:10,component:"th",scope:"row",children:e.time}),(0,w.jsx)(A.Z,{align:"right",children:e.name}),(0,w.jsx)(A.Z,{align:"right",children:e.person_count}),(0,w.jsx)(A.Z,{align:"right",children:e.contact}),(0,w.jsx)(A.Z,{align:"right",children:e.description}),(0,w.jsx)(A.Z,{width:10,align:"center",children:(0,w.jsx)(R,{reservation:B(B({},e),{},{date:a})})})]},e.name)})),0===i.filter((function(e){return e.time>"19:00"})).length&&(0,w.jsx)(N.Z,{children:(0,w.jsx)(A.Z,{colSpan:6,style:{textAlign:"center"},children:"No hay reservas"})})]})]})})}(null===n||void 0===n?void 0:n.reservations)]})})}},5889:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/agenda",function(){return t(6666)}])}},function(e){e.O(0,[16,297,343,571,774,888,179],(function(){return n=5889,e(e.s=n);var n}));var n=e.O();_N_E=n}]);