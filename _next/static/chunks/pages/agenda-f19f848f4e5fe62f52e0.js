(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[396],{8325:function(e,n,t){"use strict";var r=t(6261),i=t(5893);n.Z=function(e){var n=r.W_;return(0,i.jsx)(n,{className:"page",id:e.id,children:(0,i.jsxs)("div",{className:"main",children:[e.title&&(0,i.jsx)("h1",{className:"title",children:e.title}),e.children]})})}},1991:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ae}});var r=t(7294),i=t(8325),a=t(6437),c=t(266),s=t(2809),o=t(6311),l=t(809),u=t.n(l),d=t(6186),h=t(6914),p=t(9783),j=t(4666),f=t(5522),x=t(7750),Z=t(5344),g=t(1931),m=t(578),v=t(3889),b=t(1655),y=t(5853),O=t(8779),w=t(6867),C=t(9986),P=t(7645),S=t(6447),k=t(9062),D=t(8309),_=t(7957),E=t(381),I=t.n(E),N=t(5893);function M(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function A(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?M(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):M(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var H=function(e){var n=r.useState(!1),t=(0,o.Z)(n,2),i=t[0],l=t[1],E=r.useState(!1),M=(0,o.Z)(E,2),H=M[0],W=M[1],Y=(0,r.useState)({date:null,time:null,name:"",person_count:"",contact:"",description:""}),z=Y[0],R=Y[1];(0,r.useEffect)((function(){i&&e.edit&&R(A(A({},e.reservation),{},{time:(0,y.Z)(e.reservation.time,"HH:mm",new Date)}))}),[i]);var B=(0,r.useState)(""),F=B[0],L=B[1],T=(0,r.useState)(!1),X=T[0],q=T[1],V=function(e,n){R((function(t){return A(A({},t),{},(0,s.Z)({},n,e))}))},G=function(){l(!0)},J=function(){R({date:null,time:null,name:"",person_count:"",contact:"",description:""}),l(!1)},K=function(){W(!1)},Q=function(){var n=(0,c.Z)(u().mark((function n(){var t,r;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(z.date&&z.time){n.next=2;break}return n.abrupt("return");case 2:q(!0),t="string"===typeof z.date||z.date instanceof String?z.date:(0,O.Z)(z.date,"yyyy-MM-dd"),r="string"===typeof z.time||z.time instanceof String?z.time:(0,O.Z)(z.time,"HH:mm"),e.edit?(0,a.cW)(t,z.id,A(A({},z),{},{time:(0,O.Z)(z.time,"HH:mm")})):(0,a._L)(t,r,z.person_count,z.contact,z.name,z.description),q(!1),L("reserva ".concat(e.edit?"actualizada":"creada"," : ").concat(I()(z.date).format("DD.MM.YYYY")," ").concat(r," ").concat(z.name)),W(!0),J();case 10:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,N.jsxs)("div",{children:[e.edit?(0,N.jsx)(w.Z,{onClick:G,"aria-label":"upload picture",component:"span",children:(0,N.jsx)(_.Z,{})}):(0,N.jsx)(h.Z,{variant:"outlined",onClick:G,startIcon:(0,N.jsx)(D.Z,{}),children:"nueva reserva"}),(0,N.jsx)(C.Z,{open:H,autoHideDuration:6e3,onClose:K,anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,N.jsx)(d.Z,{onClose:K,severity:"info",sx:{width:"100%"},children:F})}),(0,N.jsxs)(j.Z,{open:i,onClose:J,children:[(0,N.jsx)(P.Z,{children:"Nueva reserva"}),(0,N.jsxs)(x.Z,{children:[(0,N.jsxs)(Z.Z,{dateAdapter:v.Z,locale:b.Z,children:[(0,N.jsx)(g.Z,{label:"D\xeda",inputFormat:"dd.MM.yyyy",value:z.date,onChange:function(e){return V(e,"date")},renderInput:function(e){return(0,N.jsx)(p.Z,A(A({},e),{},{margin:"dense",fullWidth:!0}))}}),(0,N.jsx)(m.Z,{label:"Hora",ampm:!1,value:z.time,onChange:function(e){V(e,"time")},renderInput:function(e){return(0,N.jsx)(p.Z,A(A({},e),{},{margin:"dense",fullWidth:!0}))}})]}),(0,N.jsx)(p.Z,{margin:"dense",label:"Nombre",type:"text",value:z.name,fullWidth:!0,onChange:function(e){return V(e.target.value,"name")}}),(0,N.jsx)(p.Z,{margin:"dense",value:z.person_count,label:"Personas",type:"text",fullWidth:!0,onChange:function(e){return V(e.target.value,"person_count")}}),(0,N.jsx)(p.Z,{value:z.contact,margin:"dense",label:"Contacto",type:"text",fullWidth:!0,onChange:function(e){return V(e.target.value,"contact")}}),(0,N.jsx)(p.Z,{margin:"dense",value:z.description,label:"Observaciones",type:"text",fullWidth:!0,onChange:function(e){return V(e.target.value,"description")}})]}),X?(0,N.jsx)(S.Z,{alignItems:"end",children:(0,N.jsx)(k.Z,{style:{marginRight:24,marginBottom:20}})}):(0,N.jsxs)(f.Z,{children:[(0,N.jsx)(h.Z,{onClick:J,children:"Cancelar"}),(0,N.jsx)(h.Z,{onClick:Q,children:e.edit?"Cambiar":"A\xf1adir"})]})]})]})},W=t(1508),Y=t(3951),z=t(625),R=t(7691);function B(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function F(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?B(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):B(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var L=function(e){var n=(0,R.a)(),t=n.userInfo,i=n.login,a=(0,r.useState)({}),o=a[0],l=a[1],j=(0,r.useState)(!1),f=j[0],x=j[1],Z=function(e,n){l((function(t){return F(F({},t),{},(0,s.Z)({},n,e))}))},g=function(){var e=(0,c.Z)(u().mark((function e(n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,i(o.username,o.password);case 4:x(!1),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),x(!0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(n){return e.apply(this,arguments)}}();return t.isLoading?(0,N.jsx)(S.Z,{alignItems:"center",children:(0,N.jsx)(k.Z,{})}):t.isAuth?e.children:(0,N.jsx)(W.Z,{component:"form",noValidate:!0,autoComplete:"off",onSubmit:g,children:(0,N.jsxs)(S.Z,{spacing:3,children:[(0,N.jsx)(p.Z,{label:"Correo",onChange:function(e){return Z(e.target.value,"username")}}),(0,N.jsx)(p.Z,{label:"Contrase\xf1a",type:"password",onChange:function(e){return Z(e.target.value,"password")}}),f&&(0,N.jsx)(d.Z,{severity:"warning",children:"Por favor, compruebe sus datos de acceso"}),(0,N.jsx)(h.Z,{type:"submit",children:"Inicio"})]})})},T=t(9647),X=t(7349),q=t(7896),V=t(6501),G=t(9573),J=t(6011),K=t(3694),Q=t(6926),U=t(8732),$=t(6408),ee=t(8364),ne=function(e){var n=e.reservation,t=r.useState(!1),i=(0,o.Z)(t,2),s=i[0],l=i[1],d=function(){l(!1)},p=function(){var e=(0,c.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(),e.next=3,(0,a.CE)(n.date,n.id);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,N.jsxs)("div",{children:[(0,N.jsx)(w.Z,{onClick:function(){l(!0)},"aria-label":"upload picture",component:"span",children:(0,N.jsx)(ee.Z,{})}),(0,N.jsxs)(j.Z,{open:s,onClose:d,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,N.jsx)(P.Z,{id:"alert-dialog-title",children:"\xbfRealmente quieres borrar la reserva?"}),(0,N.jsx)(x.Z,{children:(0,N.jsxs)($.Z,{id:"alert-dialog-description",children:[I()(n.date).format("DD.MM.YYYY"),(0,N.jsx)("br",{}),n.time,(0,N.jsx)("br",{}),n.name]})}),(0,N.jsxs)(f.Z,{children:[(0,N.jsx)(h.Z,{onClick:d,children:"No"}),(0,N.jsx)(h.Z,{onClick:p,autoFocus:!0,children:"S\xed"})]})]})]})};function te(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function re(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?te(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):te(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ie=function(e){var n,t,r=e.agenda,i=null===r||void 0===r?void 0:r.date,a=(null===r||void 0===r?void 0:r.reservations)||[];return(0,N.jsx)(q.Z,{component:V.Z,children:(0,N.jsxs)(G.Z,{size:"small",sx:{minWidth:650},"aria-label":"simple table",children:[(0,N.jsx)(J.Z,{children:(0,N.jsxs)(K.Z,{children:[(0,N.jsx)(Q.Z,{children:"Hora"}),(0,N.jsx)(Q.Z,{align:"right",children:"Nombre"}),(0,N.jsx)(Q.Z,{align:"right",children:"Personas"}),(0,N.jsx)(Q.Z,{align:"right",children:"Contacto"}),(0,N.jsx)(Q.Z,{align:"right",children:"Observaciones"}),(0,N.jsx)(Q.Z,{align:"center"})]})}),(0,N.jsxs)(U.Z,{children:[null===a||void 0===a||null===(n=a.filter((function(e){return e.time<"19:00"})))||void 0===n?void 0:n.map((function(e){return(0,N.jsxs)(K.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,N.jsx)(Q.Z,{width:10,component:"th",scope:"row",children:e.time}),(0,N.jsx)(Q.Z,{align:"right",children:e.name}),(0,N.jsx)(Q.Z,{align:"right",children:e.person_count}),(0,N.jsx)(Q.Z,{align:"right",children:e.contact}),(0,N.jsx)(Q.Z,{align:"right",children:e.description}),(0,N.jsx)(Q.Z,{width:10,align:"center",children:(0,N.jsxs)(S.Z,{direction:"row",children:[(0,N.jsx)(H,{edit:!0,reservation:re(re({},e),{},{date:i})}),(0,N.jsx)(ne,{reservation:re(re({},e),{},{date:i})})]})})]},e.id)})),0===a.filter((function(e){return e.time<"19:00"})).length&&(0,N.jsx)(K.Z,{children:(0,N.jsx)(Q.Z,{colSpan:6,style:{textAlign:"center"},children:"No hay reservas"})}),(0,N.jsx)(K.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:(0,N.jsxs)(Q.Z,{colSpan:6,width:10,component:"th",scope:"row",style:{textAlign:"center"},children:[(0,N.jsx)("hr",{}),(0,N.jsx)("hr",{})]})}),null===a||void 0===a||null===(t=a.filter((function(e){return e.time>"19:00"})))||void 0===t?void 0:t.map((function(e){return(0,N.jsxs)(K.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,N.jsx)(Q.Z,{width:10,component:"th",scope:"row",children:e.time}),(0,N.jsx)(Q.Z,{align:"right",children:e.name}),(0,N.jsx)(Q.Z,{align:"right",children:e.person_count}),(0,N.jsx)(Q.Z,{align:"right",children:e.contact}),(0,N.jsx)(Q.Z,{align:"right",children:e.description}),(0,N.jsx)(Q.Z,{width:10,align:"center",children:(0,N.jsxs)(S.Z,{direction:"row",children:[(0,N.jsx)(H,{edit:!0,reservation:re(re({},e),{},{date:i})}),(0,N.jsx)(ne,{reservation:re(re({},e),{},{date:i})})]})})]},e.id)})),0===a.filter((function(e){return e.time>"19:00"})).length&&(0,N.jsx)(K.Z,{children:(0,N.jsx)(Q.Z,{colSpan:6,style:{textAlign:"center"},children:"No hay reservas"})})]})]})})},ae=function(){var e=(0,R.a)().userInfo,n=(0,r.useState)({}),t=n[0],c=n[1],s=(0,r.useState)(new Date),o=s[0],l=s[1],u=(0,r.useState)(!0),d=u[0],p=u[1];(0,r.useEffect)((function(){if(e.isAuth){p(!0);var n=(0,O.Z)(o,"yyyy-MM-dd"),t=(0,a.x8)(n,(function(e){var n,t=e.data();t&&t.reservations&&(t.reservations=null===t||void 0===t||null===(n=t.reservations)||void 0===n?void 0:n.sort((function(e,n){return e.time.localeCompare(n.time)})));c(t),p(!1)}));return function(){t()}}}),[o,e]);var j=function(e){var n=(0,X.Z)(o,e);l(n)};return(0,N.jsx)(i.Z,{id:"agenda",title:"Agenda",children:(0,N.jsxs)(L,{children:[(0,N.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[(0,N.jsx)("div",{children:(0,N.jsx)(w.Z,{component:"span",onClick:function(){return j(-1)},children:(0,N.jsx)(Y.Z,{})})}),(0,N.jsxs)(S.Z,{direction:"row",spacing:2,justifyContent:"center",alignItems:"center",children:[(0,N.jsx)(h.Z,{onClick:function(){l(new Date)},children:"Hoy"}),(0,N.jsx)(Z.Z,{dateAdapter:v.Z,locale:b.Z,children:(0,N.jsx)(T.Z,{value:o,onChange:function(e){l(e)},renderInput:function(e){var n=e.inputRef,t=(e.inputProps,e.InputProps);return(0,N.jsxs)(W.Z,{sx:{display:"flex",alignItems:"center"},children:[null===t||void 0===t?void 0:t.endAdornment,"\xa0\xa0\xa0",(0,N.jsx)("strong",{ref:n,children:(0,O.Z)(o,"dd.MM.yyyy")})]})}})}),(0,N.jsx)(H,{})]}),(0,N.jsx)("div",{children:(0,N.jsx)(w.Z,{component:"span",onClick:function(){return j(1)},children:(0,N.jsx)(z.Z,{})})})]}),d?(0,N.jsx)(S.Z,{alignItems:"center",children:(0,N.jsx)(k.Z,{})}):(0,N.jsx)(ie,{agenda:t})]})})}},5889:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/agenda",function(){return t(1991)}])}},function(e){e.O(0,[885,725,774,888,179],(function(){return n=5889,e(e.s=n);var n}));var n=e.O();_N_E=n}]);